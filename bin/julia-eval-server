#!/usr/bin/env julia
#
# AgentEval MCP Server - Persistent Julia evaluation for AI agents
#
# This script starts an MCP server using STDIO transport that provides
# persistent Julia code evaluation, solving the TTFX (Time to First X)
# problem for AI agents like Claude Code.
#
# Usage:
#   julia --project=/path/to/AgentEval.jl bin/julia-eval-server
#
# Claude Code configuration:
#   claude mcp add julia-eval -- julia --project=/path/to/AgentEval.jl \
#       /path/to/AgentEval.jl/bin/julia-eval-server
#
# Environment variables:
#   JULIA_EVAL_PROJECT - Optional path to a Julia project to activate
#

using AgentEval

# Get optional project directory from environment
project_dir = get(ENV, "JULIA_EVAL_PROJECT", nothing)

# Start the server (blocks until terminated)
AgentEval.start_server(; project_dir=project_dir)
